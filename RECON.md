# RECONNAISSANCE

The Reconnaissance stage ranges from being useful to essential in offensive security tasks. Known as **RECON** (also referred to as **OSINT** due to the large use of open source resources), it is a set of actions that must be carried out from the beginning of the pentest, but which can even continue to be carried out in parallel throughout the process, considering that partial results may require it.

## INFORMATION GATHERING

Obtaining information for a pentest can be extremely brief, and even more so if it refers to a traditional infrastructure pentest. It is usually limited to finding exposed hosts (internally and/or externally depending on the scope of the pentest). The relevant information is the IP addresses and DNS names (Enumeration)

However, searching for disclosed information about the hosts in the scope is relevant and must be reported. A clear example is those hosts that are registered in databases such as SHODAN and that, based on the banner, allow identifying vulnerabilities that have a CVE record and that would affect these hosts.

Another aspect in the search for disclosed information is the possibility of finding credentials that are still valid and using them in some authentication process that is exposed. Other types of information may include technical details of the infrastructure or applications in the scope. But, the most important information will always be the data that may be exposed in simple file storage repositories such as buckets/blobs that are exposed.

## ENUMERATION

Simple enumeration refers to obtaining DNS names and IP addresses of active hosts. The scope and time allocated to the pentest as well as the number of pentesters assigned will allow for additional enumeration tasks that correspond to that scope.

Enumeration may include searching for DNS subdomains, virtual web servers, Whois records, Internet service providers, the protection in the form of services they have, hosts registered in publicly accessible databases (whether paid or not), screenshots of the websites, among others.

## RESEARCH

At this point, all the information obtained is analyzed and its usability is determined based on the scope of the pentest. This analysis may also determine that additional information needs to be obtained or the results formatted in a specific way and even alert the organization that requested the pentest about an early finding.

It is important to understand that a pentest does not imply analyzing the value of the information independently by the pentesters. It is a task that must be carried out in conjunction with the appropriate people in the organization evaluated during the pentest.

## ELEMENTS USED DURING RECON

### Search Engines:

- Google
- Shodan
- BinaryEdge
- ZoomEye
- IntelX
- It is best to use queries made using commands such as CURL or scripts/programs that make use of the APIs provided by the search engines because they allow better results and in some cases allow more queries to be made using the APIs than using the browser.
  
### Based on perspective (Infrastructure)

#### EXTERNAL

- DNS lookups (direct and reverse). Always try to transfer DNS zones.
- Whois record searches at the IP address and DNS domain name level.
- Hurricane Electric Internet Service (Internet Backbone) and other local databases.
- DNS subdomain search tools such as sublist3r or Sudomy (the latter includes searching for virtual web servers and obtaining screenshots of the websites found, among other things).
- Searching for real IP addresses (when protected by services like CloudFlare): SecurityTrails
- Searching for resources on "cloud" providers: Recon.Cloud

#### INTERNAL

- Discovering active targets using NMAP: nmap -n -v -sn --reason ip_subnet -oA recon-ip_subnet-date
- Of course, the above line does not cover all cases, but the rest of the efforts with NMAP involve port scanning unless it is requested to use only ICMP and/or ARP.
  
#### APPLICATIONS

- As always in the case of applications, the analysis of each request and response is vital to know the environment of the application.
- Some tools like Wappalyzer or BuiltWith help to have information quickly although it will not always be able to accompany you throughout all the systems that comprise an application and in cases like mobile, the most useful thing will continue to be to learn about the APIs used (more so in an environment where there is a tendency towards PWAs).
- Tools like Burp (intruder) or Ffuf can be used for endpoint discovery based on custom word lists. However, most commonly this type of enumeration is done as an additional step to the discovery tests performed in the use of the application and as a way to find a security flaw in an orphaned endpoint or one exposed directly or by an unexercised condition.
- The case of GraphQL is particular and a great help in a pentest if introspection is enabled.
